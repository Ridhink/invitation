var e=(e,t,r)=>new Promise((n,a)=>{var s=e=>{try{o(r.next(e))}catch(t){a(t)}},i=e=>{try{o(r.throw(e))}catch(t){a(t)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,i);o((r=r.apply(e,t)).next())});import{j as t,m as r,A as n}from"./animation-vendor-B09DxYdl.js";import{R as a,a as s}from"./react-vendor-DKO9vRwH.js";import{u as i}from"./useConfig-B3vSstg8.js";import{c as o}from"./utils-BwKF3qjA.js";import{H as d,C as l,M as c,a as m,b as u,c as h,d as f}from"./ui-vendor-DS9byCC8.js";import"./index-DXLQdfR9.js";const x=[{icon:d,label:"Home",href:"#home",id:"home"},{icon:l,label:"Events",href:"#event",id:"event"},{icon:c,label:"Location",href:"#location",id:"location"},{icon:m,label:"Wishes",href:"#wishes",id:"wishes"}],p=()=>{const[e,n]=a.useState("home"),i=x,d=s.useCallback((e,t,r)=>{e.preventDefault();const a=document.querySelector(t);a&&(n(r),a.scrollIntoView({behavior:"smooth",block:"start"}))},[]);return s.useEffect(()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.id;i.find(e=>e.id===t)&&n(t)}})},{root:null,rootMargin:"-20% 0px -80% 0px",threshold:0});return i.forEach(t=>{const r=document.getElementById(t.id);r&&e.observe(r)}),()=>{e.disconnect()}},[i]),t.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-sand-200 shadow-[0_-2px_10px_rgba(0,0,0,0.06)] md:bottom-4 md:left-1/2 md:right-auto md:w-auto md:max-w-[400px] md:-translate-x-1/2 md:rounded-2xl md:border md:border-sand-200/80 md:shadow-soft md:mx-4",style:{paddingBottom:"env(safe-area-inset-bottom)"},role:"navigation","aria-label":"Main navigation",children:t.jsx("div",{className:"flex items-stretch justify-around md:justify-center md:gap-0 h-14 md:h-auto md:py-2.5 md:px-2",children:i.map(n=>t.jsxs(r.a,{href:n.href,className:o("flex flex-col items-center justify-center flex-1 min-w-0 min-h-[44px] md:min-w-[64px] md:min-h-[52px] rounded-lg md:rounded-xl transition-colors duration-200 active:bg-sand-100/80",e===n.id?"text-sage-600 bg-sage-100/80":"text-stone-500"),whileTap:{scale:.96},onClick:e=>d(e,n.href,n.id),children:[t.jsx(n.icon,{className:o("w-6 h-6 md:w-5 md:h-5 shrink-0 mb-0.5 transition-all duration-200",e===n.id?"stroke-sage-600 stroke-[2.5px]":"stroke-stone-400 stroke-2")}),t.jsx("span",{className:o("text-[11px] md:text-xs font-medium line-clamp-1",e===n.id?"text-sage-600":"text-stone-500"),children:n.label})]},n.label))})})},v=({children:a})=>{var o;const d=i(),[l,c]=s.useState(!1),[m,x]=s.useState(!1),v=s.useRef(null),b=s.useRef(!1);s.useEffect(()=>{var t,r;v.current=new Audio((null==(t=d.audio)?void 0:t.src)||"/audio/fulfilling-humming.mp3"),v.current.loop=!1!==(null==(r=d.audio)?void 0:r.loop);return e(null,null,function*(){try{yield v.current.play(),c(!0),b.current=!0,x(!0),setTimeout(()=>x(!1),3e3)}catch(t){const r=()=>e(null,null,function*(){try{yield v.current.play(),c(!0),b.current=!0,x(!0),setTimeout(()=>x(!1),3e3),document.removeEventListener("click",r)}catch(e){}});document.addEventListener("click",r)}}),()=>{v.current&&(v.current.pause(),v.current=null)}},[]),s.useEffect(()=>{const e=()=>{document.hidden?(b.current=l,v.current&&l&&(v.current.pause(),c(!1))):v.current&&b.current&&(v.current.play().catch(console.error),c(!0))},t=()=>{b.current=l,v.current&&l&&(v.current.pause(),c(!1))},r=()=>{v.current&&b.current&&(v.current.play().catch(console.error),c(!0))},n=()=>{var e,t;c(!0),x(!0),setTimeout(()=>x(!1),null!=(t=null==(e=d.audio)?void 0:e.toastDuration)?t:3e3)},a=()=>{c(!1),x(!1)};return v.current&&(v.current.addEventListener("play",n),v.current.addEventListener("pause",a)),document.addEventListener("visibilitychange",e),window.addEventListener("blur",t),window.addEventListener("focus",r),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("blur",t),window.removeEventListener("focus",r),v.current&&(v.current.removeEventListener("play",n),v.current.removeEventListener("pause",a))}},[l]);return s.useEffect(()=>{const e=()=>{v.current&&(v.current.pause(),c(!1))};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[]),t.jsx("div",{className:"relative min-h-[100dvh] w-full bg-sand-50 md:bg-gradient-to-br md:from-sand-100 md:via-lavender-50/50 md:to-amber-50/50 flex md:items-center md:justify-center md:py-6 md:px-2",children:t.jsxs(r.div,{className:"w-full max-w-[430px] min-h-[100dvh] md:min-h-[calc(100dvh-3rem)] bg-white relative overflow-hidden md:rounded-[2rem] md:shadow-elegant md:ring-1 md:ring-black/5 mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[t.jsx(r.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:200},whileTap:{scale:.9},onClick:()=>e(null,null,function*(){if(v.current)try{l?(v.current.pause(),b.current=!1):(yield v.current.play(),b.current=!0)}catch(e){}}),className:"fixed top-[max(0.75rem,env(safe-area-inset-top))] right-[max(1rem,env(safe-area-inset-right))] z-50 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-full bg-white shadow-md border border-sand-200 active:bg-sand-100 md:bg-white/90 md:backdrop-blur-md","aria-label":l?"Pause music":"Play music",children:l?t.jsxs("div",{className:"relative flex items-center justify-center",children:[t.jsx(u,{className:"w-6 h-6 text-sage-600",strokeWidth:2}),t.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-emerald-400 rounded-full animate-pulse ring-2 ring-white"})]}):t.jsx(h,{className:"w-6 h-6 text-sage-500",strokeWidth:2})}),t.jsx("main",{className:"relative w-full min-h-[100dvh]",style:{paddingBottom:"calc(4.5rem + env(safe-area-inset-bottom))"},children:a}),t.jsx(p,{}),t.jsx(n,{children:m&&t.jsx(r.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.3},className:"fixed left-4 right-4 md:left-1/2 md:right-auto md:-translate-x-1/2 z-50 md:w-auto",style:{bottom:"max(5.5rem, calc(5.5rem + env(safe-area-inset-bottom)))"},children:t.jsxs("div",{className:"bg-stone-800/95 text-sand-50 md:-translate-x-1/2 px-4 py-3 rounded-2xl md:rounded-full backdrop-blur-md flex items-center justify-center gap-2 shadow-lg text-sm font-medium",children:[t.jsx(f,{className:"w-4 h-4 text-amber-300 shrink-0"}),t.jsx("span",{className:"whitespace-nowrap",children:(null==(o=d.audio)?void 0:o.title)||"Background Music"})]})})})]})})};export{v as default};
